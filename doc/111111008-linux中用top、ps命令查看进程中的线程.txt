ps命令查看父进程及线程 

1、查看父进程
ps -ef |grep <进程名>
在显示的输出中，第三列就是该进程的父进程PID，然后可以再使用ps命令来查看父进程的名称
ps -ef |grep <父进程PID>

2、查看线程
ps hH p <pid>

3、ps aux查看进程stat字段含义：
　　 D    不可中断     Uninterruptible sleep (usually IO)
    R    正在运行，或在队列中的进程
    S    处于休眠状态
    T    停止或被追踪
    Z    僵尸进程
    W    进入内存交换（从内核2.6开始无效）
    X    死掉的进程

    <    高优先级
    N    低优先级
    L    有些页被锁进内存
    s    包含子进程
    +    位于后台的进程组；
    l    多线程，克隆线程  multi-threaded (using CLONE_THREAD, like NPTL pthreads do)

4、ps命令个参数含义：

1）ps a 显示现行终端机下的所有程序，包括其他用户的程序。
2）ps -A   显示所有程序。
3）ps c    列出程序时，显示每个程序真正的指令名称，而不包含路径，参数或常驻服务的标示。
4）ps -e  此参数的效果和指定"A"参数相同。
5）ps e   列出程序时，显示每个程序所使用的环境变量。
6）ps f    用ASCII字符显示树状结构，表达程序间的相互关系。
7）ps -H    显示树状结构，表示程序间的相互关系。
8）ps -N   显示所有的程序，除了执行ps指令终端机下的程序之外。
9）ps s     采用程序信号的格式显示程序状况。
10）ps S     列出程序时，包括已中断的子程序资料。
11）ps -t <终端机编号> 　指定终端机编号，并列出属于该终端机的程序的状况。
12）ps u 　 以用户为主的格式来显示程序状况。
13）ps x 　 显示所有程序，不以终端机来区分。

14）ps -l     ^L,^的@示PID的信息

# ps -lA |more

F S   UID   PID  PPID  C PRI  NI ADDR SZ   WCHAN     TTY            TIME          CMD
4 S     0     1     0        0  76   0     -  1193 109952       ?             00:00:03 init
1 S     0     2     1        0 -40   -      -     0    migrat        ?             00:00:03 migration/0
1 S     0     3     1        0  94  19    -     0     ksofti         ?             00:00:00 ksoftirqd/0
1 S     0     4     1        0 -40   -      -     0    migrat        ?             00:00:02 migration/1
1 S     0     5     1        0  94  19    -     0    ksofti          ?             00:00:00 ksoftirqd/1
1 S     0     6     1        0 -40   -      -     0    migrat        ?             00:00:02 migration/2
1 S     0     7     1        0  94  19    -     0    ksofti          ?             00:00:00 ksoftirqd/2


ps 命令查看进程下的线程及线程状态

查看java所有线程

ps CeLf | grep java

查看进程下的所有线程cpu利用率

top -H -p 25120

其中25120为Java进程号。

下图红色标注的地方为线程状态。其中总数为28，当前运行的线程为0,28个线程睡眠，没有终止的线程或僵尸线程。


树状图显示进程关系

pstree Cp 1 


linux中用top、ps命令查看进程中的线程

在Linux上显示某个进程的线程的几种方式。

方法一：PS

在ps命令中，“-T”选项可以开启线程查看。下面的命令列出了由进程号为<pid>的进程创建的所有线程。

1.$ ps -T -p <pid>


方法二： Top

top命令可以实时显示各个线程情况。要在top输出中开启线程查看，请调用top命令的“-H”选项，该选项会列出所有Linux线程。在top运行时，你也可以通过按“H”键将线程查看模式切换为开或关。

1.$ top -H

要让top输出某个特定进程<pid>并检查该进程内运行的线程状况：

2.$ top -H -p <pid>


方法三： Htop

一个对用户更加友好的方式是，通过htop查看单个进程的线程，它是一个基于ncurses的交互进程查看器。该程序允许你在树状视图中监控单个独立线程。

要在htop中启用线程查看，请开启htop，然后按<F2>来进入htop的设置菜单。选择“设置”栏下面的“显示选项”，然后开启“树状视图”和“显示自定义线程名”选项。按<F10>退出设置。
